<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thêm Sản Phẩm</title>
    <script
      src="https://kit.fontawesome.com/47907ab6ea.js"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <link rel="stylesheet" href="fileCSS/style.css" />
    <link rel="stylesheet" href="fileCSS/otherCSS/sigup.css">
    <script src="fileJS/hotro.js"></script>
    <script src="fileJS/sanPham.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>
  <body">
  <div id="toastBox"></div>
    <section class="mobile">
     
      <div class="bar_icon" id="bar_icon" onclick="onclickOpen(this)">
        <i class="fa-solid fa-bars open" id="open"></i>
      </div>
      <div class="nav__header" id="nav_header">
        <ul>
          <li>
            <a href="index.html">Trang chủ</a>
          </li>
          <li><a href="#">Giới thiệu</a></li>
          <li><a href="#hangDT">Hãng điện thoại</a></li>
          <li><a href="#">Hệ thống siêu thị</a></li>
          <li><a href="Them-SanPham.html">Thêm Sản Phẩm</a></li>
          
          <li><a href="index.html">Thoát</a></li>
        </ul>
      </div>
      <div class="them-moi-san-pham">
        <label for="hinhAnh">Hình Ảnh Sản Phẩm</label>

        <input
          type="text"
          id="hinhAnh"
          accept="image/gif, image/jpeg, image/png"
        />

        <label for="ten">Tên Sản Phẩm</label>
        <input type="text" id="ten" />

        <label for="giaGoc">Giá Gốc</label>
        <input type="number" id="giaGoc" />

        <label for="hangDT">Hãng Điện thoại</label>
        <select name="hangDT" id="hangDT">
          <option value="Apple">Apple</option>
          <option value="SamSung">SamSung</option>
          <option value="Nokia">Nokia</option>
          <option value="Vivo">Vivo</option>
          <option value="Oppo">Oppo</option>
          <option value="Xiaomi">Xiaomi</option>
          <option value="Realme">Realme</option>
          <option value="TCL">TCL</option>
          <option value="Itel">Itel</option>
          <option value="Mobell">Mobell</option>
        </select>

        <label for="moTa">Nội dung mô tả sản phẩm</label>
        <textarea id="moTa" cols="35" rows="10"></textarea>
<input type="hidden" id="index">
        <button id="save" onclick="onClickTaoSanPham()">Thêm Sản Phẩm</button>
        <button id="update" onclick="thayDoiSanPham()" style="display: none">
          Sửa Sản Phẩm
        </button>

        <!-- <label for="hinhAnh">Hình Ảnh Sản Phâm</label>
        <input type="text" id="hinhAnh"> -->
      </div>
      
      <div id="products">
        <div class="menuAu">
          <i class="fa-solid fa-list"></i>
          <h3>Danh Sách Sản Phẩm</h3>
        </div>
       
        <div class="items" id="items">
          <div class="item">
            <div class="item_image">
              <img
                src="https://lesang.vn/hinh-anh-le-sang/images/iphone-5-hinh-anh-chinh-thuc-3.jpg"
                alt=""
                id="image"
              />
            </div>
            <h2 class="item_title">I Phone 11</h2>

            <div class="item_price">
              <span class="item_origin">5000000</span>
            </div>
            <div class="item_sale-text"></div>
            <div class="buyMoreCart">
              <button class="btn primary">Thêm vào giỏ hàng</button>
            </div>
          </div>
        </div>
      </div>
      <div class="footer">
        <div class="footer_container">
          <div class="footer_colum">
            <div class="footer_col1">
              <h1>Tổng đài hỗ trợ miễn phí</h1>
              <div class="footer__col1-text">
                <p>hot line mua hàng 1800.1212(7h20 - 21h00)</p>
                <p>hot line khiếu nại 1800.1212(7h20 - 21h00)</p>
                <p>hot line bảo hành 1800.1212(7h20 - 21h00)</p>
              </div>
            </div>
            <div class="footer_col1">
              <h1>Thông tin và chính sách</h1>
              <div class="footer__col1-text">
                <a href="#"><p>mua hàng và thanh toán online</p></a>
                <a href="#"><p>Mua hàng trả góp Online</p></a>
                <a href="#"><p>Tra thông tin đơn hàng</p></a>
                <a href="#"><p>Tra thông tin bảo hành</p></a>
                <a href="#"><p>Thông tin hoá đơn mua hàng</p></a>
                <a href="#"><p>Trung tâm bảo hành chính hãng</p></a>
              </div>
            </div>
            <div class="footer_col1">
              <h1>Dịch vụ và thông tin khác</h1>
              <div class="footer__col1-text">
                <a href="#"><p>Ưu đãi thanh toán</p></a>
                <a href="#"><p>Quy chế hoạt động</p></a>
                <a href="#"><p>Chính sách Bảo hành</p></a>
                <a href="#"><p>Tuyển dụng</p></a>
                <a href="#"><p>Dịch vụ bảo hành mở rộng</p></a>
              </div>
            </div>
            <div class="footer_col1">
              <h1>Kết nối với Mobile</h1>
              <div class="footer_col1-icon">
                <a href="#" onclick="closeCLick()"
                  ><img src="image/imgLogo/cellphones-youtube.png" alt=""
                /></a>
                <a href="#"
                  ><img src="image/imgLogo/mobile-facebook.png" alt=""
                /></a>
                <a href="#"><img src="image/imgLogo/instagram.png" alt="" /></a>
                <a href="#"><img src="image/imgLogo/tiktok.png" alt="" /></a>
                <a href="#"><img src="image/imgLogo/zalo.png" alt="" /></a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="toastBox"></div>
    </section>
    

    <script></script>
    <script>
      var creatProduct = JSON.parse(localStorage.getItem("creatProduct"));
      if (creatProduct == null) {
        creatProduct = new Array();
      }
      

      function onClickTaoSanPham() { 
        nodeHinhAnh = document.getElementById("hinhAnh");
        const hinhAnh = nodeHinhAnh.value;

        nodeTen = document.getElementById("ten");
        const ten = nodeTen.value;

        nodeGiaGoc = document.getElementById("giaGoc");
        const giaGoc = parseInt(nodeGiaGoc.value);

        nodeHangDT = document.getElementById("hangDT");
        const hangDT = nodeHangDT.value;

        nodemoTa = document.getElementById("moTa");
        const moTa = nodemoTa.value;

        const sanPham = TaoDoiTuongSanPham(
          hinhAnh,
          ten,
          giaGoc,
          hangDT,
          moTa,
          null
        );
          if(hinhAnh==""||ten==""||giaGoc==""){
            showToast(errorMsg);
          }else{
            creatProduct.push(sanPham);
            clearInputAdd()
            showToast(succsesMsg)
          } 
        var jsonDanhSachSP = JSON.stringify(creatProduct);
        localStorage.setItem(keyLocalStorageSanPham, jsonDanhSachSP);
        var jsonDanhSachSP = localStorage.getItem(keyLocalStorageSanPham);
        
        hienThiDanhSachProduct();
      }

      hienThiDanhSachProduct();
      function hienThiDanhSachProduct() {
        const danhSachProduct = layDanhSachSanPhamDuoiLocalStorage();
        const HTML = chuyenDoiDanhSachProductSangHTML(danhSachProduct);
        const nodeProduct = document.getElementById("items");
        nodeProduct.innerHTML = HTML;
      }

      function chuyenDoiDanhSachProductSangHTML(creatProduct) {
        var htmlTong = "";
        for (var i = 0; i < creatProduct.length; i++) {
          htmlTong = htmlTong + chuyenDoiTuongProductSangHTML(creatProduct[i]);
        }
        return htmlTong;
      }

      function chuyenDoiTuongProductSangHTML(sanPham) {
        var sanpham = laySanPhamTheoID(sanPham.id);
        var gia=sanPham.giaGoc;
        var html =
          '<div class="item">' +
          '          <div class="item_image">' +
          '            <img src="' +
          sanPham.hinhAnh +
          '" alt="" id="image" />' +
          "          </div>" +
          '          <h2 class="item_title">' +
          sanPham.ten +
          "</h2>" +
          '          <div class="item_price">' +
          '            <span class="item_origin"> ' +
          gia.toLocaleString() +
          "Đ</span>" +
          "          </div>" +
          '          <div class="item_sale-text">' +
          sanPham.moTa +
          "</div>" +
          '<div id="index" type="hidden" value"' +
          sanPham.index +
          '"></div>' +
          '          <div class="btnDelete">' +
          '            <i class="fa-solid fa-pen-to-square " onclick="editSanPham(' +
          sanPham.id +
          ')"></i>' +
          '            <i class="fa-solid fa-trash" onclick="xoaItemTrongProduct(' +
          sanPham.id +
          ')"></i>' +
          "          </div>" +
          "        </div>";

        return html;
      }

      function xoaItemTrongProduct(layID) {
        const sanPham = layDanhSachSanPhamDuoiLocalStorage();
        for (var i = 0; i < sanPham.length; i++) {
          if (sanPham[i].id == layID) {
           if(confirm("bạn thật sự muốn xóa sản phẩm này")){
            sanPham.splice(i, 1);
           } 
          }
        }
        localStorage.setItem(keyLocalStorageSanPham, JSON.stringify(sanPham));
        hienThiDanhSachProduct(); 
      }

      function editSanPham(id) {
        const danhSachSanPham = localStorage.getItem(keyLocalStorageSanPham)?JSON.parse(localStorage.getItem(keyLocalStorageSanPham)):[]
        for (var i = 0; i < danhSachSanPham.length; i++) {
          if (danhSachSanPham[i].id == id) {
            document.getElementById("hinhAnh").value =
              danhSachSanPham[i].hinhAnh;
            document.getElementById("ten").value = danhSachSanPham[i].ten;
            document.getElementById("giaGoc").value = danhSachSanPham[i].giaGoc;
            document.getElementById("hangDT").value = danhSachSanPham[i].hangDT;
            document.getElementById("moTa").value = danhSachSanPham[i].moTa;
            document.getElementById("index").value = id;
            document.getElementById("save").style.display = "none";
            document.getElementById("update").style.display = "block";
          }
        }
      }

      function thayDoiSanPham() {
        var danhSachSanPham = localStorage.getItem(keyLocalStorageSanPham)?JSON.parse(localStorage.getItem(keyLocalStorageSanPham)):[]
        var index=document.getElementById("index").value
        document.getElementById("save").style.display = "block";
        document.getElementById("update").style.display = "none";
        for (sp of danhSachSanPham) {
          if (sp.id == index) {
            sp.hinhAnh = document.getElementById("hinhAnh").value
            sp.ten = document.getElementById("ten").value
            sp.giaGoc = document.getElementById("giaGoc").value
            sp.hangDT = document.getElementById("hangDT").value
            sp.moTa = document.getElementById("moTa").value
          }
        }
        localStorage.setItem(keyLocalStorageSanPham,JSON.stringify(danhSachSanPham))
        clearInputAdd();
        hienThiDanhSachProduct();
      }
    </script>
    <script src="fileJS/javscript.js"></script>
  </body>
</html>
